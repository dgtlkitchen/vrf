watch_file .vexx.json

if [[ -f .vexx.json ]]; then
  if command -v jq >/dev/null 2>&1; then
    vexx_project_id="$(jq -r '.VEXX_PROJECT_ID // empty' .vexx.json)"
    if [[ -n "$vexx_project_id" ]]; then
      export VEXX_PROJECT_ID="$vexx_project_id"
    fi

    vexx_api_key="$(jq -r '.VEXX_API_KEY // empty' .vexx.json)"
    if [[ -n "$vexx_api_key" ]]; then
      export VEXX_API_KEY="$vexx_api_key"
    fi
  else
    echo "direnv: jq is required to parse .vexx.json" >&2
  fi
fi
